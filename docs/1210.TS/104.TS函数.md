---
title: TSå‡½æ•°
date: 2022-03-29 23:04:55
permalink: /pages/288b06/
categories:
  - TS
tags:
  - 
---

# TSå‡½æ•°

## å‡½æ•°çš„ç±»å‹

åœ¨ä¸‹é¢çš„è¯­æ³•ä¸­ (num1: number, num2: number) => voidï¼Œä»£è¡¨çš„å°±æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹

* æ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°:num1å’Œnum2ï¼Œå¹¶ä¸”éƒ½æ˜¯numberç±»å‹;
* å¹¶ä¸”è¿™ä¸ªå‡½æ•°æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥æ˜¯void;

åœ¨æŸäº›è¯­è¨€ä¸­ï¼Œå¯èƒ½å‚æ•°åç§°num1å’Œnum2æ˜¯å¯ä»¥çœç•¥ï¼Œä½†æ˜¯TypeScriptæ˜¯ä¸å¯ä»¥çš„:

```ts
// 1.å‡½æ•°ä½œä¸ºå‚æ•°æ—¶, åœ¨å‚æ•°ä¸­å¦‚ä½•ç¼–å†™ç±»å‹
function foo() {}

type FooFnType = () => void
function bar(fn: FooFnType) {
  fn()
}

bar(foo)

// 2.å®šä¹‰å¸¸é‡æ—¶, ç¼–å†™å‡½æ•°çš„ç±»å‹
type AddFnType = (num1: number, num2: number) => number
const add: AddFnType = (a1: number, a2: number) => {
  return a1 + a2
}

```







### å‡½æ•°ç±»å‹çš„æ¡ˆä¾‹

```ts
function calc(n1: number, n2: number, fn: (num1: number, num2: number) => number) {
  return fn(n1, n2)
}

const result1 = calc(20, 30, function(a1, a2) {
  return a1 + a2
})
console.log(result1)

const result2 = calc(20, 30, function(a1, a2) {
  return a1 * a2
})
console.log(result2)
```







## å‚æ•°çš„å¯é€‰ç±»å‹

```ts
// å¯é€‰ç±»å‹æ˜¯å¿…é¡»å†™åœ¨å¿…é€‰ç±»å‹çš„åé¢çš„
// y -> undefined | number
function foo(x: number, y?: number) {

}

foo(20, 30)
foo(20)
```

è¿™ä¸ªæ—¶å€™è¿™ä¸ªå‚æ•°xä¾ç„¶æ˜¯æœ‰ç±»å‹çš„ï¼Œå®ƒæ˜¯ä»€ä¹ˆç±»å‹å‘¢? number | undefined



## å‚æ•°çš„é»˜è®¤å€¼

```ts
// å¿…ä¼ å‚æ•° - æœ‰é»˜è®¤å€¼çš„å‚æ•° - å¯é€‰å‚æ•°
function foo(y: number, x: number = 20) {
  console.log(x, y)
}

foo(30)
```

è¿™ä¸ªæ—¶å€™yçš„ç±»å‹å…¶å®æ˜¯ undefined å’Œ number ç±»å‹çš„è”åˆ



## å‡½æ•°çš„å‰©ä½™å‚æ•°

```ts
// function sum(num1: number, num2: number) {
//   return num1 + num2
// }

function sum(initalNum: number, ...nums: number[]) {
  let total = initalNum
  for (const num of nums) {
    total += num
  }
  return total
}

console.log(sum(20, 30))
console.log(sum(20, 30, 40))
console.log(sum(20, 30, 40, 50))
```





## TSä¸­this

### thisçš„é»˜è®¤æ¨å¯¼

TypeScriptè®¤ä¸ºå‡½æ•° eating æœ‰ä¸€ä¸ªå¯¹åº”çš„thisçš„å¤–éƒ¨å¯¹è±¡ infoï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ—¶ï¼Œå°±ä¼šæŠŠthiså½“åšè¯¥å¯¹è±¡

```ts
// thisæ˜¯å¯ä»¥è¢«æ¨å¯¼å‡ºæ¥ infoå¯¹è±¡(TypeScriptæ¨å¯¼å‡ºæ¥)
const info = {
  name: "why",
  eating() {
    console.log(this.name + " eating")
  }
}

info.eating()

export {}
```





### thisçš„ä¸æ˜ç¡®ç±»å‹

è¿™æ®µä»£ç è¿è¡Œä¼šæŠ¥é”™çš„:

* è¿™é‡Œæˆ‘ä»¬å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼ŒTSè¿›è¡Œç±»å‹æ£€æµ‹çš„ç›®çš„æ˜¯è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ çš„å®‰å…¨;
* æ‰€ä»¥è¿™é‡Œå¯¹äº eating çš„è°ƒç”¨æ¥è¯´ï¼Œæˆ‘ä»¬è™½ç„¶å°†å…¶æ”¾åˆ°äº†infoä¸­ï¼Œé€šè¿‡infoå»è°ƒç”¨ï¼Œthisä¾ç„¶æ˜¯æŒ‡å‘infoå¯¹è±¡çš„;
* ä½†æ˜¯å¯¹äºTSç¼–è¯‘å™¨æ¥è¯´ï¼Œè¿™ä¸ªä»£ç æ˜¯éå¸¸ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¹Ÿæœ‰å¯èƒ½ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…é€šè¿‡åˆ«çš„å¯¹è±¡æ¥è°ƒç”¨å‡½æ•°;

```ts
type ThisType = { name: string };

function eating(this: ThisType, message: string) {
  console.log(this.name + " eating", message);
}

const info = {
  name: "why",
  eating: eating,
};

// éšå¼ç»‘å®š
info.eating("å“ˆå“ˆå“ˆ");

// æ˜¾ç¤ºç»‘å®š
eating.call({name: "kobe"}, "å‘µå‘µå‘µ")
eating.apply({name: "james"}, ["å˜¿å˜¿å˜¿"])

export {};
```





## å‡½æ•°çš„é‡è½½

### å‡½æ•°çš„é‡è½½â€”è”åˆç±»å‹ ğŸ”¥

åœ¨TypeScriptä¸­ï¼Œå¦‚æœæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªaddå‡½æ•°ï¼Œå¸Œæœ›å¯ä»¥å¯¹å­—ç¬¦ä¸²å’Œæ•°å­—ç±»å‹è¿›è¡Œç›¸åŠ ï¼Œåº”è¯¥å¦‚ä½•ç¼–å†™å‘¢

åœ¨TypeScriptä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å»ç¼–å†™ä¸åŒçš„é‡è½½ç­¾å(overload signatures)æ¥è¡¨ç¤ºå‡½æ•°å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼è¿›è¡Œè°ƒç”¨ï¼›ä¸€èˆ¬æ˜¯ç¼–å†™ä¸¤ä¸ªæˆ–è€…ä»¥ä¸Šçš„é‡è½½ç­¾åï¼Œå†å»ç¼–å†™ä¸€ä¸ªé€šç”¨çš„å‡½æ•°ä»¥åŠå®ç°

```ts
/**
 * é€šè¿‡è”åˆç±»å‹æœ‰ä¸¤ä¸ªç¼ºç‚¹:
 *  1.è¿›è¡Œå¾ˆå¤šçš„é€»è¾‘åˆ¤æ–­(ç±»å‹ç¼©å°)
 *  2.è¿”å›å€¼çš„ç±»å‹ä¾ç„¶æ˜¯ä¸èƒ½ç¡®å®š
 */
function add(a1: number | string, a2: number | string) {
  if (typeof a1 === "number" && typeof a2 === "number") {
    return a1 + a2
  } else if (typeof a1 === "string" && typeof a2 === "string") {
    return a1 + a2
  }

  // return a1 + a2;
}

add(10, 20)
```





### å‡½æ•°çš„é‡è½½â€”å‡½æ•°é‡è½½ ğŸ”¥

```ts
// å‡½æ•°çš„é‡è½½: å‡½æ•°çš„åç§°ç›¸åŒ, ä½†æ˜¯å‚æ•°ä¸åŒçš„å‡ ä¸ªå‡½æ•°, å°±æ˜¯å‡½æ•°çš„é‡è½½
function add(num1: number, num2: number): number; // æ²¡å‡½æ•°ä½“
function add(num1: string, num2: string): string;

function add(num1: any, num2: any): any {
  if (typeof num1 === 'string' && typeof num2 === 'string') {
    return num1.length + num2.length
  }
  return num1 + num2
}

const result = add(20, 30)
const result2 = add("abc", "cba")
console.log(result)
console.log(result2)

// åœ¨å‡½æ•°çš„é‡è½½ä¸­, å®ç°å‡½æ•°æ˜¯ä¸èƒ½ç›´æ¥è¢«è°ƒç”¨çš„
// add({name: "why"}, {age: 18})

export {}
```





### å‡½æ•°çš„é‡è½½ç»ƒä¹ 

ä¸€èˆ¬ä½¿ç”¨è”åˆç±»å‹å®ç°ï¼Œé™¤éæ¯”è¾ƒå¤æ‚ï¼Œå¦‚è¿”å›å€¼ç±»å‹ä¹Ÿä¸åŒï¼

```ts
// å®ç°æ–¹å¼ä¸€: è”åˆç±»å‹
function getLength(args: string | any[]) {
  return args.length
}

console.log(getLength("abc"))
console.log(getLength([123, 321, 123]))

// å®ç°æ–¹å¼äºŒ: å‡½æ•°çš„é‡è½½
// function getLength(args: string): number;
// function getLength(args: any[]): number;

// function getLength(args: any): number {
//   return args.length
// }

// console.log(getLength("abc"))
// console.log(getLength([123, 321, 123]))
```



